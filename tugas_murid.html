<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>

<script>
  // Config lu udah bener, tapi pastiin urutannya setelah library di atas
  const firebaseConfig = {
  apiKey: "AIzaSyAzx45BGMkFzkZNi8qMYqdW9pJ51zqb16A",
  authDomain: "pengumpulantugas-de3df.firebaseapp.com",
  projectId: "pengumpulantugas-de3df",
  storageBucket: "pengumpulantugas-de3df.firebasestorage.app",
  messagingSenderId: "180956417489",
  appId: "1:180956417489:web:919107bbf625eee64564f0",
  measurementId: "G-LZXW5ZYZBV",
  
  // GANTI BARIS INI DENGAN ALAMAT YANG BARU:
  databaseURL: "https://pengumpulantugas-de3df-default-rtdb.asia-southeast1.firebasedatabase.app"
};

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database(); 
</script>
    <meta charset="UTF-8">
    <title>Pengumpulan Tugas Siswa</title>
    <link rel="stylesheet" href="style.css">
    <link rel="lamannotifikasi" href="notifikasi.html">
    <link rel="lamanlogin" href="index.html">
    <link rel="pengumpulantugas" href="tugas_murid.html">
    <link rel="pengumpulantugas" href="tugas_guru.html">
</head>
<body>
    <div class="container">
        <div class="card-guru" style="background: #fff3cd; padding: 15px; border-radius: 10px; margin-bottom: 20px; border-left: 5px solid #ffc107;">
            <h4>ðŸ“Œ Tugas dari Guru:</h4>
            <ul id="tugasBaruGuru" style="list-style: none; padding: 0;">
            </ul>
        </div>
        <div class="login-card">
            <h2>Halaman Pengumpulan Tugas (Siswa)</h2>
            
            <input type="text" id="tugasSiswa" placeholder="Nama Tugas / Judul">
            <button onclick="kirimTugas()">Kirim ke Guru</button>

            <hr>
            <h4>Tugas Saya:</h4>
            <ul id="daftarTugas" style="list-style: none; padding: 0; text-align: left;"></ul>

            <br>
            <a href="index.html" style="color: red;">Logout</a>
        </div>
    </div>

    <script>
    function kirimTugas() {
    const input = document.getElementById('tugasSiswa');
    if(input.value === "") return alert("Isi dulu!");

    // KIRIM KE CLOUD: Menyimpan ke folder 'tugasSiswa'
    db.ref('tugasSiswa').push({
        tugas: input.value,
        waktu: Date.now()
    });
    
    input.value = "";
    alert("Tugas terkirim ke Guru!");
}

// LIHAT TUGAS DARI GURU (Realtime)
db.ref('tugasDariGuru').on('value', (snapshot) => {
    const data = snapshot.val();
    const elemen = document.getElementById('tugasBaruGuru');
    elemen.innerHTML = ""; 
    
    for (let id in data) {
        elemen.innerHTML += `<li>ðŸ“¢ Instruksi: ${data[id].pesan}</li>`;
    }
});
    </script>
</body>
</html>